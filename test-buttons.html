<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Test - LP Staking Platform</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn:hover { opacity: 0.8; }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #333;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üß™ LP Staking Platform - Button Functionality Test</h1>
    
    <div class="test-section">
        <h2>Test 1: Stake Button</h2>
        <button class="btn btn-primary stake-btn" data-pair-id="pair-1">
            Stake LIB-USDT
        </button>
        <div id="stake-result" class="result">Click the stake button to test...</div>
    </div>

    <div class="test-section">
        <h2>Test 2: Refresh Button</h2>
        <button class="btn btn-secondary" id="manual-refresh">
            üîÑ Refresh Data
        </button>
        <div id="refresh-result" class="result">Click the refresh button to test...</div>
    </div>

    <div class="test-section">
        <h2>Test 3: Uniswap Link</h2>
        <button class="btn btn-success uniswap-link" data-pair="LIB-USDT">
            ü¶Ñ Add Liquidity on Uniswap
        </button>
        <div id="uniswap-result" class="result">Click the Uniswap button to test...</div>
    </div>

    <div class="test-section">
        <h2>Test 4: Wallet Connection</h2>
        <button class="btn btn-primary" id="connect-wallet-btn">
            üëõ Connect Wallet
        </button>
        <div id="wallet-result" class="result">Click the wallet button to test...</div>
    </div>

    <div class="test-section">
        <h2>System Status</h2>
        <div id="system-status" class="result">Checking system status...</div>
    </div>

    <!-- Load the main application scripts -->
    <script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script src="config/constants.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/core/error-handler.js"></script>
    <script src="js/components/notification.js"></script>
    <script src="js/core/state-manager.js"></script>
    <script src="js/contracts/contract-manager.js"></script>
    <script src="js/core/event-manager.js"></script>
    <script src="js/core/component-registry.js"></script>
    <script src="js/core/event-delegation.js"></script>
    <script src="js/core/router.js"></script>
    <script src="js/core/system-manager.js"></script>
    <script src="js/wallet/network-manager.js"></script>
    <script src="js/wallet/wallet-manager.js"></script>
    <script src="js/components/base-component.js"></script>
    <script src="js/components/modal.js"></script>
    <script src="js/components/staking-modal.js"></script>
    <script src="js/pages/home.js"></script>
    <script src="js/pages/admin.js"></script>
    <script src="js/core/app.js"></script>

    <script>
        // Test script
        console.log('üß™ Starting button functionality test...');

        // Wait for systems to initialize
        setTimeout(() => {
            // Check system status
            const systemStatus = document.getElementById('system-status');
            const status = [];
            
            status.push(`Ethers.js: ${typeof window.ethers !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            status.push(`SystemManager: ${typeof window.systemManager !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            status.push(`NotificationManager: ${typeof window.notificationManager !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            status.push(`StakingModal Class: ${typeof window.StakingModal !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            status.push(`StakingModal Instance: ${typeof window.stakingModal !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            
            systemStatus.innerHTML = status.join('<br>');

            // Create StakingModal instance if missing
            if (window.StakingModal && !window.stakingModal) {
                window.stakingModal = new window.StakingModal();
                console.log('‚úÖ StakingModal instance created');
            }

            // Test stake button
            const stakeBtn = document.querySelector('.stake-btn');
            if (stakeBtn) {
                stakeBtn.addEventListener('click', function() {
                    console.log('üéØ Stake button clicked!');
                    const result = document.getElementById('stake-result');
                    result.innerHTML = '‚úÖ Stake button works! Opening staking modal...';
                    
                    if (window.stakingModal) {
                        const mockPair = {
                            id: 'pair-1',
                            name: 'LIB-USDT',
                            lpToken: '0x1234567890123456789012345678901234567890',
                            apr: 0,
                            isActive: true
                        };
                        
                        try {
                            window.stakingModal.show(mockPair, 0);
                            result.innerHTML += '<br>‚úÖ Staking modal opened successfully!';
                        } catch (error) {
                            result.innerHTML += '<br>‚ùå Error opening modal: ' + error.message;
                        }
                    } else {
                        result.innerHTML += '<br>‚ùå StakingModal not available';
                    }
                });
            }

            // Test refresh button
            const refreshBtn = document.getElementById('manual-refresh');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', function() {
                    console.log('üîÑ Refresh button clicked!');
                    const result = document.getElementById('refresh-result');
                    result.innerHTML = '‚úÖ Refresh button works!';
                    
                    if (window.notificationManager) {
                        window.notificationManager.success('Refreshed', 'Data has been updated');
                        result.innerHTML += '<br>‚úÖ Notification shown!';
                    }
                });
            }

            // Test Uniswap link
            const uniswapBtn = document.querySelector('.uniswap-link');
            if (uniswapBtn) {
                uniswapBtn.addEventListener('click', function() {
                    console.log('ü¶Ñ Uniswap button clicked!');
                    const result = document.getElementById('uniswap-result');
                    result.innerHTML = '‚úÖ Uniswap button works! Opening Uniswap...';
                    
                    const pairName = this.getAttribute('data-pair') || 'LIB-USDT';
                    const [token0, token1] = pairName.split('-');
                    const uniswapUrl = `https://app.uniswap.org/#/add/v2/${token0}/${token1}`;
                    
                    // Don't actually open the window in test mode
                    // window.open(uniswapUrl, '_blank', 'noopener,noreferrer');
                    
                    result.innerHTML += `<br>‚úÖ Would open: ${uniswapUrl}`;
                    
                    if (window.notificationManager) {
                        window.notificationManager.info('Test Mode', 'Uniswap link would open in real app');
                    }
                });
            }

            // Test wallet connection
            const walletBtn = document.getElementById('connect-wallet-btn');
            if (walletBtn) {
                walletBtn.addEventListener('click', function() {
                    console.log('üëõ Wallet button clicked!');
                    const result = document.getElementById('wallet-result');
                    result.innerHTML = '‚úÖ Wallet button works!';
                    
                    if (window.walletManager) {
                        result.innerHTML += '<br>‚úÖ WalletManager available';
                        if (window.notificationManager) {
                            window.notificationManager.info('Test Mode', 'Wallet connection would start in real app');
                        }
                    } else {
                        result.innerHTML += '<br>‚ùå WalletManager not available';
                    }
                });
            }

            console.log('‚úÖ Test setup complete! Click the buttons to test functionality.');

        }, 2000); // Wait 2 seconds for initialization
    </script>
</body>
</html>